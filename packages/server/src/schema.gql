# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

input AssociateLotClientInput {
  clientId: String!
  deliveryDate: DateTime
  lotId: String!
  quantity: Int = 1
}

type AuthPayload {
  accessToken: String!
  user: UserPayload!
}

type Client {
  addressLine1: String
  addressLine2: String
  city: String
  commercial: User
  commercialId: String
  country: String!
  createdAt: DateTime!
  email: String
  filieres: [Filiere!]
  id: ID!
  isActive: Boolean!
  latitude: Float
  longitude: Float
  name: String!
  organization: String
  phone: String
  postalCode: String
  region: String
  updatedAt: DateTime!
}

type ClientAlert {
  alertType: String!
  clientId: String!
  clientName: String!
  createdAt: DateTime!
  message: String!
}

type ClientMapItem {
  addressLine1: String
  city: String
  id: String!
  latitude: Float!
  longitude: Float!
  name: String!
}

type ClientStats {
  active: Int!
  inactive: Int!
  total: Int!
}

input ClientsFilterInput {
  city: String
  filiereIds: [String!]
  isActive: Boolean
  search: String
  skip: Int = 0
  take: Int = 50
}

type ClientsResponse {
  clients: [Client!]!
  total: Int!
}

type CommercialUser {
  email: String!
  firstName: String!
  id: ID!
  lastName: String!
}

input CreateClientInput {
  addressLine1: String
  addressLine2: String
  city: String
  country: String = "FR"
  email: String
  filiereIds: [String!]
  name: String!
  organization: String
  phone: String
  postalCode: String
  region: String
}

input CreateNoteInput {
  clientId: String!
  content: String!
}

input CreateOpportunityInput {
  amount: Float = 0
  clientId: String!
  contactEmail: String
  contactName: String!
  contactPhone: String
  expectedCloseDate: String!
  manualAmount: Float = 0
  notes: String
  ownerId: String
  probability: Int
  source: String!
  title: String!
}

input CreateOrderInput {
  clientId: String!
  expectedDelivery: DateTime
  lines: [CreateOrderLineInput!]
  notes: String
}

input CreateOrderLineInput {
  kitId: String
  productCode: String
  productId: String
  productName: String!
  quantity: Int!
  unitPrice: Float!
}

input CreatePhotoInput {
  caption: String
  url: String!
  visitId: String!
}

input CreateProductInput {
  code: String!
  description: String
  filiereId: String
  gtin: String
  name: String!
  unitPrice: Float!
}

input CreateProductKitInput {
  code: String!
  description: String
  items: [KitItemInput!]!
  name: String!
  price: Float!
}

input CreateVisitInput {
  clientId: String
  date: String!
  notes: String
  subject: String
}

type DashboardData {
  alerts: [ClientAlert!]!
  revenueByMonth: [RevenueByMonth!]!
  revenueTrend: [RevenueDataPoint!]!
  stats: DashboardStats!
}

input DashboardFilterInput {
  """End date for the period filter"""
  endDate: String

  """Preset period: M-1, Q-1, Y-1, or custom"""
  preset: String

  """Start date for the period filter"""
  startDate: String
}

type DashboardStats {
  activeClients: Int!
  cancelledRevenue: Float!
  revenueThisMonth: Float!
  totalClients: Int!
  totalLots: Int!
  totalRevenue: Float!
  totalVisits: Int!
  visitsThisMonth: Int!
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Filiere {
  description: String
  id: ID!
  name: String!
}

input KitItemInput {
  productId: String!
  quantity: Float! = 1
}

input LoginInput {
  email: String!
  password: String!
}

type Lot {
  createdAt: DateTime!
  expirationDate: DateTime
  id: ID!
  lotNumber: String!
  product: LotProduct!
  rawBarcode: String
}

type LotClient {
  clientAddress: String
  clientCity: String
  clientId: String!
  clientName: String
  clientPostalCode: String
  createdAt: DateTime!
  deliveryDate: DateTime!
  id: ID!
  lot: Lot!
  quantity: Int!
}

type LotProduct {
  createdAt: DateTime!
  gtin: String
  id: ID!
  name: String!
}

type LotTraceability {
  clientCount: Int!
  deliveries: [LotClient!]!
  lot: Lot!
  totalQuantity: Int!
}

type Mutation {
  addKitToOpportunity(kitId: String!, opportunityId: String!, quantity: Int! = 1): Opportunity!
  addOrderLine(line: CreateOrderLineInput!, orderId: String!): Order!
  addProductToOpportunity(opportunityId: String!, productId: String!, quantity: Int! = 1): Opportunity!
  assignOpportunity(newOwnerId: String!, opportunityId: String!): Opportunity!
  associateLotToClient(input: AssociateLotClientInput!): LotClient!
  cancelOrder(id: String!): Order!

  """Convertit une opportunité gagnée en commande"""
  convertOpportunityToOrder(opportunityId: String!): Order!
  createClient(input: CreateClientInput!): Client!
  createNote(input: CreateNoteInput!): Note!
  createOpportunity(input: CreateOpportunityInput!): Opportunity!
  createOrder(input: CreateOrderInput!): Order!
  createPhoto(input: CreatePhotoInput!): Photo!
  createProduct(input: CreateProductInput!): Product!
  createProductKit(input: CreateProductKitInput!): ProductKit!
  createVisit(input: CreateVisitInput!): Visit!
  deleteAllClients: Int!
  deleteClient(id: String!): Client!
  deleteNote(id: String!): Note!
  deleteOpportunity(id: String!): Opportunity!
  deleteOrder(id: String!): Boolean!
  deletePhoto(id: String!): Photo!
  deleteProduct(id: String!): Product!
  deleteProductKit(id: String!): ProductKit!
  deleteVisit(id: String!): Visit!
  login(input: LoginInput!): AuthPayload!
  removeOpportunityLine(lineId: String!): Opportunity!
  removeOrderLine(lineId: String!): Order!
  scanBarcode(input: ScanBarcodeInput!): ScanResult!
  updateClient(id: String!, input: UpdateClientInput!): Client!
  updateNote(id: String!, input: UpdateNoteInput!): Note!
  updateOpportunity(input: UpdateOpportunityInput!): Opportunity!
  updateOpportunityLine(lineId: String!, quantity: Int!): Opportunity!
  updateOpportunityStatus(id: String!, lostComment: String, lostReason: String, status: String!): Opportunity!
  updateOrder(input: UpdateOrderInput!): Order!
  updateOrderLine(lineId: String!, quantity: Float!): Order!
  updateOrderStatus(input: UpdateOrderStatusInput!): Order!
  updateProduct(id: String!, input: UpdateProductInput!): Product!
  updateProductKit(id: String!, input: UpdateProductKitInput!): ProductKit!
  updateVisit(id: String!, input: UpdateVisitInput!): Visit!
  validateOrder(id: String!): Order!
}

type Note {
  author: NoteAuthor
  authorId: String!
  clientId: String!
  content: String!
  createdAt: DateTime!
  id: ID!
  updatedAt: DateTime!
}

type NoteAuthor {
  firstName: String!
  id: ID!
  lastName: String!
}

type Opportunity {
  amount: Float!
  client: OpportunityClient!
  contactEmail: String
  contactName: String!
  contactPhone: String
  createdAt: DateTime!
  expectedCloseDate: DateTime!
  id: ID!
  lines: [OpportunityLine!]!
  lostComment: String
  lostReason: String
  manualAmount: Float
  notes: String
  owner: OpportunityOwner!
  probability: Int!
  source: OpportunitySource!
  status: OpportunityStatus!
  title: String!
  updatedAt: DateTime!
  weightedAmount: Float!
}

type OpportunityClient {
  id: ID!
  name: String!
  organization: String
}

type OpportunityLine {
  id: ID!
  kitId: String
  productId: String
  productName: String!
  quantity: Int!
  total: Float!
  unitPrice: Float!
}

type OpportunityOwner {
  email: String!
  firstName: String!
  id: ID!
  lastName: String!
}

enum OpportunitySource {
  APPEL_ENTRANT
  AUTRE
  RECOMMANDATION
  SALON
  SITE_WEB
}

enum OpportunityStatus {
  CONVERTI
  GAGNE
  NEGOCIATION
  NOUVEAU
  PERDU
  PROPOSITION
  QUALIFICATION
}

type Order {
  client: Client!
  clientId: String!
  createdAt: DateTime!
  deliveredAt: DateTime
  expectedDelivery: DateTime
  id: String!
  lines: [OrderLine!]!
  notes: String
  opportunityId: String
  owner: User!
  ownerId: String!
  reference: String!
  status: OrderStatus!
  taxRate: Float!
  total: Float!
  totalHT: Float!
  totalTTC: Float!
  trackingNumber: String
  updatedAt: DateTime!
  validatedAt: DateTime
}

type OrderLine {
  createdAt: DateTime!
  id: String!
  kitId: String
  productCode: String
  productId: String
  productName: String!
  quantity: Int!
  total: Float!
  unitPrice: Float!
}

"""Statut de la commande"""
enum OrderStatus {
  ANNULEE
  BROUILLON
  EXPEDIEE
  LIVREE
  PREPARATION
  VALIDEE
}

type Photo {
  caption: String
  createdAt: DateTime!
  id: ID!
  url: String!
  visitId: String!
}

type Product {
  code: String!
  createdAt: DateTime!
  description: String
  filiere: ProductFiliere
  filiereId: String
  gtin: String
  id: ID!
  isActive: Boolean!
  name: String!
  tenantId: String!
  unitPrice: Float!
  updatedAt: DateTime!
}

type ProductFiliere {
  code: String!
  id: ID!
  name: String!
}

type ProductKit {
  code: String!
  createdAt: DateTime!
  description: String
  id: ID!
  isActive: Boolean!
  items: [ProductKitItem!]!
  name: String!
  price: Float!
  tenantId: String!
  updatedAt: DateTime!
}

type ProductKitItem {
  id: ID!
  product: Product!
  productId: String!
  quantity: Float!
}

type Query {
  allFilieres: [Filiere!]!
  allLots(search: String): [Lot!]!
  client(id: String!): Client!
  clientLots(clientId: ID!): [LotClient!]!
  clientNotes(clientId: String!): [Note!]!
  clientPhotos(clientId: String!): [Photo!]!
  clientStats: ClientStats!
  clientVisits(clientId: String!): [Visit!]!
  clients(filter: ClientsFilterInput): ClientsResponse!
  clientsForMap: [ClientMapItem!]!
  commercialsForAssignment: [CommercialUser!]!
  dashboardData(filter: DashboardFilterInput): DashboardData!
  filieres: [Filiere!]!
  lot(id: ID!): Lot
  lotTraceability(lotId: ID!): LotTraceability!
  me: User!
  myClients(filter: ClientsFilterInput): [Client!]!
  myVisits(filter: VisitsFilterInput): [Visit!]!
  note(id: String!): Note!
  opportunities: [Opportunity!]!
  opportunitiesByStatus(status: String!): [Opportunity!]!
  opportunity(id: String!): Opportunity!
  order(id: String!): Order!
  orders: [Order!]!
  ordersByStatus(status: OrderStatus!): [Order!]!
  product(id: String!): Product!
  productKit(id: String!): ProductKit!
  productKits(includeInactive: Boolean = false): [ProductKit!]!
  products(includeInactive: Boolean = false): [Product!]!
  productsByFiliere(filiereId: String!): [Product!]!
  searchLots(query: String!): [Lot!]!
  todayVisits: [Visit!]!
  upcomingVisits(days: Int = 7): [Visit!]!
  visit(id: String!): Visit!
  visitPhotos(visitId: String!): [Photo!]!
}

type RevenueByMonth {
  month: String!
  revenue: Float!
}

type RevenueDataPoint {
  cancelledRevenue: Float!
  label: String!
  revenue: Float!
}

input ScanBarcodeInput {
  barcode: String!
  productName: String
}

type ScanResult {
  expirationDate: DateTime
  gtin: String
  isNewProduct: Boolean!
  lot: Lot
  lotNumber: String
  message: String
  productName: String
  success: Boolean!
}

input UpdateClientInput {
  addressLine1: String
  addressLine2: String
  city: String
  country: String = "FR"
  email: String
  filiereIds: [String!]
  isActive: Boolean
  latitude: Float
  longitude: Float
  name: String
  organization: String
  phone: String
  postalCode: String
  region: String
}

input UpdateNoteInput {
  content: String
}

input UpdateOpportunityInput {
  amount: Float = 0
  clientId: String
  contactEmail: String
  contactName: String
  contactPhone: String
  expectedCloseDate: String
  id: String!
  lostComment: String
  lostReason: String
  manualAmount: Float = 0
  notes: String
  ownerId: String
  probability: Int
  source: String
  status: String
  title: String
}

input UpdateOrderInput {
  expectedDelivery: DateTime
  id: String!
  notes: String
  status: OrderStatus
  taxRate: Float
  trackingNumber: String
}

input UpdateOrderStatusInput {
  id: String!
  status: OrderStatus!
  trackingNumber: String
}

input UpdateProductInput {
  code: String
  description: String
  filiereId: String
  gtin: String
  isActive: Boolean
  name: String
  unitPrice: Float
}

input UpdateProductKitInput {
  code: String
  description: String
  isActive: Boolean
  items: [KitItemInput!]
  name: String
  price: Float
}

input UpdateVisitInput {
  clientId: String
  date: String
  notes: String
  subject: String
}

type User {
  createdAt: DateTime!
  email: String!
  firstName: String!
  id: ID!
  isActive: Boolean!
  lastName: String!
  role: String!
  updatedAt: DateTime!
}

type UserPayload {
  email: String!
  firstName: String!
  id: String!
  lastName: String!
  role: String!
}

type Visit {
  client: Client
  clientId: String
  createdAt: DateTime!
  date: DateTime!
  id: ID!
  notes: String
  subject: String
  updatedAt: DateTime!
  user: VisitUser
  userId: String!
}

type VisitUser {
  firstName: String!
  id: ID!
  lastName: String!
}

input VisitsFilterInput {
  clientId: String
  endDate: String
  skip: Int
  startDate: String
  take: Int
}