# =============================================================================
# .env.prod - Variables d'environnement PRODUCTION
# ⚠️  NE JAMAIS COMMITER CE FICHIER AVEC LES VRAIES VALEURS
# Copier vers .env et adapter les valeurs selon l'infrastructure
# =============================================================================

# -----------------------------------------------------------------------------
# Environment
# -----------------------------------------------------------------------------
NODE_ENV=production
APP_ENV=production

# -----------------------------------------------------------------------------
# Database PostgreSQL (instance PROD dédiée - managed recommandé)
# -----------------------------------------------------------------------------
POSTGRES_USER=cdiagvet_prod
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PROD_PASSWORD
POSTGRES_DB=cdiagvet_prod

# URL via PgBouncer
DATABASE_URL=postgresql://cdiagvet_prod:CHANGE_ME@pgbouncer-prod:5432/cdiagvet_prod

# URL directe (pour migrations Prisma)
DIRECT_DATABASE_URL=postgresql://cdiagvet_prod:CHANGE_ME@postgres-prod:5432/cdiagvet_prod

# -----------------------------------------------------------------------------
# Redis (instance PROD dédiée - managed recommandé)
# -----------------------------------------------------------------------------
REDIS_PASSWORD=CHANGE_ME_STRONG_PROD_REDIS_PASSWORD
REDIS_URL=redis://:CHANGE_ME@redis-prod:6379

# -----------------------------------------------------------------------------
# JWT Authentication
# Générer avec: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
# -----------------------------------------------------------------------------
JWT_SECRET=CHANGE_ME_GENERATE_UNIQUE_SECRET_FOR_PROD
JWT_EXPIRES_IN=14d

# -----------------------------------------------------------------------------
# Server
# -----------------------------------------------------------------------------
SERVER_PORT=3000
LOG_LEVEL=warn

# -----------------------------------------------------------------------------
# Frontend
# -----------------------------------------------------------------------------
VITE_API_URL=https://api.cdiagvet.fr/graphql
VITE_APP_ENV=production

# -----------------------------------------------------------------------------
# Ports exposés
# -----------------------------------------------------------------------------
HTTP_PORT=80
HTTPS_PORT=443

# -----------------------------------------------------------------------------
# CORS
# -----------------------------------------------------------------------------
CORS_ORIGIN=https://app.cdiagvet.fr

# -----------------------------------------------------------------------------
# Production security
# -----------------------------------------------------------------------------
ENABLE_GRAPHQL_PLAYGROUND=false
ENABLE_DEBUG_LOGGING=false
RATE_LIMIT_ENABLED=true
RATE_LIMIT_MAX=60

# -----------------------------------------------------------------------------
# Optionnel: Email (SendGrid)
# -----------------------------------------------------------------------------
# SENDGRID_API_KEY=SG.xxxxx
# SENDGRID_FROM_EMAIL=noreply@cdiagvet.fr

# -----------------------------------------------------------------------------
# Optionnel: Stockage S3 (Scaleway/AWS)
# -----------------------------------------------------------------------------
# S3_ENDPOINT=https://s3.fr-par.scw.cloud
# S3_BUCKET=cdiagvet-prod-uploads
# S3_ACCESS_KEY=xxxxx
# S3_SECRET_KEY=xxxxx
# S3_REGION=fr-par

# -----------------------------------------------------------------------------
# Optionnel: Monitoring
# -----------------------------------------------------------------------------
# SENTRY_DSN=https://xxxxx@sentry.io/xxxxx

# -----------------------------------------------------------------------------
# Optionnel: Backups
# -----------------------------------------------------------------------------
# BACKUP_S3_BUCKET=cdiagvet-backups
# BACKUP_RETENTION_DAYS=30
